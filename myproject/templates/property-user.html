{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Our Properties </title>

     <!--=====FAB ICON=======-->
    <link rel="shortcut icon" href="{% static 'assets/img/logo/fav-logo.png' %}" type="image/x-icon">

    <!--===== CSS LINK =======-->
    <link rel="stylesheet" href="{% static 'assets/css/plugins/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/aos.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/mobile.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/owlcarousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/sidebar.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/slick-slider.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/nice-select.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">

    <!--=====  JS SCRIPT LINK =======-->
    <script src="{% static 'assets/js/plugins/jquery-3-6-0.min.js' %}"></script>

    <style>
      .social-links-mobile-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex; 
  gap: 30px; 
}

.social-links-mobile-menu li {
  display: inline-block;
}

.social-links-mobile-menu a {
  text-decoration: none;
  color: inherit;
  font-size: 20px; 
}

.property-card {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: transform 0.3s;
    margin-bottom: 30px;
  }
  
  .property-card:hover {
    transform: translateY(-5px);
  }
  
  .property-img {
    position: relative;
    height: 250px;
    overflow: hidden;
  }
  
  .property-img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .property-tag {
    position: absolute;
    top: 15px;
    right: 15px;
  }
  
  .property-tag .transaction-type {
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 14px;
  }
  
  .transaction-type.rent {
    background: #007bff;
    color: white;
  }
  
  .transaction-type.sale {
    background: #28a745;
    color: white;
  }
  
  .property-content {
    padding: 20px;
  }
  
  .property-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
  }
  
  .property-location {
    color: #666;
    margin-bottom: 15px;
  }
  
  .property-details {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    color: #444;
  }
  
  .property-details span {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .property-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 15px;
    border-top: 1px solid #eee;
  }
  
  .price {
    font-size: 18px;
    font-weight: 600;
    color: #007bff;
  }
  
  .broker-info {
    color: #666;
    font-size: 14px;
  }

  .property-filter .btn-group {
    background: #fff;
    padding: 5px;
    border-radius: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  .btn-filter {
    padding: 10px 25px;
    border: none;
    border-radius: 25px !important;
    color: #666;
    font-weight: 500;
    transition: all 0.3s ease;
    margin: 0 5px;
    background: transparent;
  }
  
  .btn-filter:hover {
    color: #007bff;
    background: rgba(0,123,255,0.1);
  }
  
  .btn-filter.active {
    background: #007bff;
    color: white;
  }
    </style>
</head>
<body class="homepage1-body">

<!--===== PRELOADER STARTS =======-->
<div id="preloader">
  <div class="home-icon">
    <div class="roof"></div>
    <div class="walls"></div>
    <div class="door"></div>
      <div class="windows">
          <div class="window"></div>
          <div class="window"></div>
      </div>
  </div>
  <div id="ctn-preloader" class="ctn-preloader">
    <div class="animation-preloader">
        <div class="txt-loading">
             <span data-text-preloader="S" class="letters-loading">
              S
            </span>
            <span data-text-preloader="E" class="letters-loading">
               E
            </span>
            <span data-text-preloader="M" class="letters-loading">
                M
            </span>
            <span data-text-preloader="S" class="letters-loading">
                S
            </span>
            <span data-text-preloader="A" class="letters-loading">
                A
            </span>
            <span data-text-preloader="R" class="letters-loading">
                R
            </span>
        </div>
    </div>
  </div>
</div>
<!--===== PRELOADER ENDS =======-->

  <!--===== PAGE PROGRESS START=======-->
  <div class="paginacontainer">
    <div class="progress-wrap">
      <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
      </svg>
    </div>
  </div>
<!--===== PAGE PROGRESS END=======-->

   <!--=====HEADER START=======-->
   <header>
    <div class="header-area homepage1 inner-menu header header-sticky d-none d-lg-block " id="header">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="header-elements">
              <div class="site-logo">
                <a href="{% url 'home-user' %}"><img src="{% static 'assets/img/logo/logo2.png' %}" alt=""></a>
              </div>
              <div class="main-menu">
                <ul>
                  <li><a href="{% url 'home-user' %}">Home </a></li>
                  <li><a href="{% url 'about-user' %}">About</a></li>
                  <li><a href="{% url 'property-user' %}">Property</a></li>
                  <li><a href="{% url 'brokers' %}">Brokers</a></li>
                </ul>
              </div>
              <div class="btn-area">
                <a href="{% url 'logout' %}" class="header-btn1">Logout <img src="{% static 'assets/img/icons/arrow1.svg' %}" alt=""></a>
              </div>

              <div class="header-search-form-wrapper">
                <div class="tx-search-close tx-close"><i class="fa-solid fa-xmark"></i></div>
                <div class="header-search-container">
                    <form role="search" class="search-form">
                    <input type="search"  class="search-field" placeholder="Search …" value="" name="s">
                    <button type="submit" class="search-submit"><img src="{% static 'assets/img/icons/search1.svg' %}" alt=""></button>
                    </form>
                </div>
            </div>
            <div class="body-overlay"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!--=====HEADER END =======-->

  <!--===== MOBILE HEADER STARTS =======-->

  <div class="mobile-header mobile-haeder2 d-block d-lg-none">
  <div class="container-fluid">
    <div class="col-12">
      <div class="mobile-header-elements">
        <div class="mobile-logo">
          <a href="{% url 'home-user' %}"><img src="{% static 'assets/img/logo/logo2.png' %}" alt=""></a>
        </div>
        <div class="mobile-nav-icon dots-menu">
          <i class="fa-solid fa-bars-staggered"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mobile-sidebar mobile-sidebar2">
  <div class="logosicon-area">
     <div class="site-logo">
        <a href="{% url 'home-user' %}"><img src="{% static 'assets/img/logo/logo1.png' %}" alt=""></a>
        </div>
    <div class="menu-close">
      <i class="fa-solid fa-xmark"></i>
    </div>
   </div>
  <div class="mobile-nav mobile-nav1">
    <ul class="mobile-nav-list nav-list1">
      <li><a href="{% url 'home-user' %}" >Home </a></li>
      <li><a href="{% url 'about-user' %}">About</a></li>
      <li><a href="{% url 'property-user' %}">Property</a></li>
      <li><a href="{% url 'brokers' %}">Brokers</a></li>
    </ul>
    <div class="allmobilesection">
      <div class="single-footer">
        <h3>Contact Info</h3>
        <div class="footer1-contact-info">
          <div class="contact-info-single">
            <div class="contact-info-icon">
              <span><i class="fa-solid fa-phone-volume"></i></span>
            </div>
            <div class="contact-info-text">
              <a href="tel:+3(924)4596512">+0201020017477</a>
            </div>
          </div>
          
          <div class="single-footer" >
            <h3>Our Location</h3>
            <div class="contact-info-single">
              <div class="contact-info-icon">
                <span><i class="fa-solid fa-location-dot"></i></span>
              </div>
              <div class="contact-info-text">
                <a href="mailto:info@example.com" >57th Street, Al-Bashaer District<br> 6th october, Giza </a>
              </div>
            </div>
          </div>
          <div class="single-footer"  >
            <h3>Social Links</h3> 
            <div class="social-links-mobile-menu" >
              <ul>
                <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-linkedin-in"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
     </div>
  </div>
</div>
 
<!--===== MOBILE HEADER STARTS =======-->

<!--===== HERO AREA STARTS =======-->
<div class="properties3-section-area sp1">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 m-auto">
        <div class="property-header text-center heading6">
          <h5 class="text-anim"><img src="{% static 'assets/img/icons/logo-icon2.svg' %}" alt="">Properties</h5>
          <h2 class="text-anime-style-3">Our Properties</h2>
        </div>
      </div>
    </div>
<div class="row">
      <div class="col-lg-8 m-auto">
        <div class="property-slider-area owl-carousel">
          <div class="property-boxarea">
            <div class="img1 image-anime reveal">
              <img src="{% static 'assets/img/all-images/prime-residence-new-cairo.jpg' %}" alt=""  style="height: 430px;">
            </div>

            <div class="content-area">
              <h2>Renting a new home?</h2>
              <p>Look no further with our selection of all-tier properties</p>
              <div class="space16"></div>
              <p> Try Renting NOW!</p>
              <div class="btn-area1">
                <a href="#search-button" class="header-btn1">Rent Now <img src="{% static 'assets/img/icons/arrow-img5.svg' %}" alt=""></a>
              </div>
            </div>
          </div>

          <div class="property-boxarea">
            <div class="img1 image-anime reveal">
              <img src="{% static 'assets/img/all-images/New-giza-compound.jpg' %}" alt="" style="height: 430px;">
            </div>

            <div class="content-area">
              <h2>Buying a new home?</h2>
              <p>Look no further with our selection of all-tier properties</p>
              <div class="space16"></div>
              <p>Try Buying NOW!</p>
              <div class="btn-area1">
                <a href="#search-button" class="header-btn1">Buy Now <img src="{% static 'assets/img/icons/arrow-img5.svg' %}" alt=""></a>
              </div>
            </div>
          </div>

          <div class="property-boxarea">
            <div class="img1 image-anime reveal">
              <img src="{% static 'assets/img/all-images/home3.jpg' %}" alt=""  style="height: 430px;" >
            </div>

            <div class="content-area">
              <h2>Can't find what you're looking for?</h2>
              <p>Try our exceptional service that connects you with guranteed brokers</p>
              <div class="space16"></div>
              <p>Try Contacting our brokers NOW!</p>
              <div class="btn-area1">
                <a href="{% url 'brokers' %}" class="header-btn1">Contact Now <img src="{% static 'assets/img/icons/arrow-img5.svg' %}" alt=""></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--===== HERO AREA ENDS =======-->

<!--===== PROPERTY AREA STARTS =======-->
<div class="property-inner-area sp1">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
          <div class="listing-tabs-area">
            <ul class="nav nav-pills" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">For Rent</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">For Sale</button>
              </li>
            </ul>
            <div class="space24"></div>
            <div class="tab-content" id="pills-tabContent">
              <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                <div class="row">
                  <div class="col-lg-4">
                    <div class="listing-input">
                        <select id="city-rent" name="city-rent" class="city-select nice-select">
                            <option value="" selected disabled>City</option>
                            <option value="cairo">Cairo</option>
                            <option value="giza">Giza</option>
                        </select>
                    </div>
                    <div class="space24"></div>
                </div>                  
                  <div class="col-lg-4">
                      <div class="listing-input">
                        <select id="area-rent" name="area-rent" class="area-select nice-select">
                          <option value="" disabled selected>Area</option>
  
                          <!-- CAIRO -->
                          
                          <option value="shubra"          data-city="cairo">Shubra</option>
                          <option value="elmarg"          data-city="cairo">El Marg</option>
                          <option value="dar-el-salam"    data-city="cairo">Dar El Salam</option>
                          <option value="maadi"           data-city="cairo">Maadi</option>
                          <option value="nasr-city"       data-city="cairo">Nasr City</option>
                          <option value="mokattam"        data-city="cairo">Mokattam</option>
                          <option value="new-cairo"       data-city="cairo">New Cairo</option>
                          <option value="garden-city"     data-city="cairo">Garden City</option>
                          <option value="al-rehab-city"   data-city="cairo">Al Rehab City</option>

                          <!-- ===================== GIZA ===================== -->
                          <option value="imbaba"            data-city="giza">Imbaba</option>
                          <option value="boulaq-eldakrour"  data-city="giza">Boulaq El-Dakrour</option>
                          <option value="elmarg"            data-city="giza">El Marg</option>
                          <option value="mohandessin"       data-city="giza">Mohandessin</option>
                          <option value="dokki"             data-city="giza">Dokki</option>
                          <option value="agouza"            data-city="giza">Agouza</option>
                          <option value="beverly-hills"     data-city="giza">Beverly Hills</option>
                          <option value="dream-land"        data-city="giza">Dream Land</option>
                          <option value="sheikh-zayed"      data-city="giza">Sheikh Zayed</option>
                      </select>
                      </div>
                      <div class="space24"></div>
                  </div>
              
                  <div class="col-lg-4">
                    <div class="listing-input">
                      <select name="Type-rent" class="nice-select">
                          <option value="" selected disabled>Type</option>
                          <option value="Roof">Roof</option>
                          <option value="Apartment">Apartment</option>
                          <option value="Duplex">Duplex</option>
                          <option value="Villa">Villa</option>
                      </select>
                  </div>
                    <div class="space24"></div>
                </div>

            <div class="col-lg-4">
              <div class="listing-input">
                <input  type="number"
                        name="bathrooms-rent"
                        class="nice-select"   
                        placeholder="Bathrooms"
                        min="0"              
                        step="1"           
                        inputmode="numeric">             
              </div>
              <div class="space24"></div>
          </div>
          <div class="col-lg-4">
            <div class="listing-input">
              <input  type="number"
                      name="bedrooms-rent"
                      class="nice-select"   
                      placeholder="Bedrooms"
                      min="0"              
                      step="1"           
                      inputmode="numeric">             
            </div>
            <div class="space24"></div>
        </div>

        <div class="col-lg-4">
         <div class="row">
          <div class="col-lg-6">
            <div class="listing-input">
              <input  type="number"
                      name="min_price-rent"
                      class="nice-select"   
                      placeholder="Min Price (EGP)"
                      min="0"              
                      step="1000"           
                      inputmode="numeric">             
            </div>
          <div class="space24"></div>
          </div>
          
          <div class="col-lg-6">
            <div class="listing-input">
              <input  type="number"
                      name="max_price-rent"
                      class="nice-select"   
                      placeholder="Max Price (EGP)"
                      min="0"              
                      step="1000"           
                      inputmode="numeric">             
            </div>
          <div class="space24"></div>
          </div>
          </div>
          </div>
          
          <div class="col-lg-4">
          <div class="row">
          <div class="col-lg-6">
            <div class="listing-input">
              <input  type="number"
                      name="min_size-rent"
                      class="nice-select"   
                      placeholder="Min Size (m²)"
                      min="0"              
                      step="1"           
                      inputmode="numeric">             
            </div>
          <div class="space24"></div>
          </div>
          
          <div class="col-lg-6">
            <div class="listing-input">
              <input  type="number"
                      name="max_size-rent"
                      class="nice-select"   
                      placeholder="Max Size (m²)"
                      min="0"              
                      step="1"           
                      inputmode="numeric">             
            </div>
           <div class="space24"></div>
         </div>

              <div class="col-lg-6">                 
                  <label>
                    <input type="checkbox" name="Furnished" value="yes">
                    Furnished
                  </label>                              
                <div class="space24"></div>
            </div>
        </div>
     </div>

     <div class="col-lg-4">
      <div class="row">

      </div>
   </div>

   <div class="col-lg-4">
    <div class="listing-input">

    </div>
    <div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="space24"></div>

<div class="btn-area1">
  <button id="search-button" class="header-btn1 send-to-brokers" type="submit" style="margin-top: 10px;"><img src="{% static 'assets/img/icons/search2.svg' %}" alt=""> Search Your Property</button>
</div>
</div>
</div>
</div>
<div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
<div class="row">
  <div class="col-lg-4">
    <div class="listing-input">
      <select id="city-sale" name="city-sale" class="city-select nice-select">
        <option value="" disabled selected>City</option>
        <option value="cairo">Cairo</option>
        <option value="giza">Giza</option>
    </select>
    </div>
    <div class="space24"></div>
  </div> 

  <div class="col-lg-4">
      <div class="listing-input">
        <select id="area-sale" name="area-sale" class="area-select nice-select">
          <option value="" disabled selected>Area</option>
  
          <!-- CAIRO -->
          
          <option value="shubra"          data-city="cairo">Shubra</option>
          <option value="elmarg"          data-city="cairo">El Marg</option>
          <option value="dar-el-salam"    data-city="cairo">Dar El Salam</option>
          <option value="maadi"           data-city="cairo">Maadi</option>
          <option value="nasr-city"       data-city="cairo">Nasr City</option>
          <option value="mokattam"        data-city="cairo">Mokattam</option>
          <option value="new-cairo"       data-city="cairo">New Cairo</option>
          <option value="garden-city"     data-city="cairo">Garden City</option>
          <option value="al-rehab-city"   data-city="cairo">Al Rehab City</option>

          <!-- ===================== GIZA ===================== -->
          <option value="imbaba"            data-city="giza">Imbaba</option>
          <option value="boulaq-eldakrour"  data-city="giza">Boulaq El-Dakrour</option>
          <option value="mohandessin"       data-city="giza">Mohandessin</option>
          <option value="dokki"             data-city="giza">Dokki</option>
          <option value="agouza"            data-city="giza">Agouza</option>
          <option value="beverly-hills"     data-city="giza">Beverly Hills</option>
          <option value="dream-land"        data-city="giza">Dream Land</option>
          <option value="sheikh-zayed"      data-city="giza">Sheikh Zayed</option>
      </select>
      </div>
      <div class="space24"></div>
  </div>


  <div class="col-lg-4">
    <div class="listing-input">
      <select name="Type-rent" class="nice-select">
          <option value="" selected disabled>Type</option>
          <option value="Roof">Roof</option>
          <option value="Apartment">Apartment</option>
          <option value="Duplex">Duplex</option>
          <option value="Villa">Villa</option>
        </select>
  </div>
    <div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="listing-input">
<input  type="number"
        name="bathrooms-rent"
        class="nice-select"   
        placeholder="Bathrooms"
        min="0"              
        step="1"           
        inputmode="numeric">             
</div>
<div class="space24"></div>
</div>
<div class="col-lg-4">
<div class="listing-input">
<input  type="number"
      name="bedrooms-rent"
      class="nice-select"   
      placeholder="Bedrooms"
      min="0"              
      step="1"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="row">
<div class="col-lg-6">
<div class="listing-input">
<input  type="number"
      name="min_price-rent"
      class="nice-select"   
      placeholder="Min Price (EGP)"
      min="0"              
      step="1000"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>

<div class="col-lg-6">
<div class="listing-input">
<input  type="number"
      name="max_price-rent"
      class="nice-select"   
      placeholder="Max Price (EGP)"
      min="0"              
      step="1000"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>
</div>
</div>

<div class="col-lg-4">
<div class="row">
<div class="col-lg-6">
<div class="listing-input">
<input  type="number"
      name="min_size-rent"
      class="nice-select"   
      placeholder="Min Size (m²)"
      min="0"              
      step="1"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>

<div class="col-lg-6">
<div class="listing-input">
<input  type="number"
      name="max_size-rent"
      class="nice-select"   
      placeholder="Max Size (m²)"
      min="0"              
      step="1"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>

<div class="col-lg-6">                 
  <label>
    <input type="checkbox" name="Furnished" value="yes">
    Furnished
  </label>                              
<div class="space24"></div>
</div>
</div>
</div>


<div class="col-lg-4">
<div class="listing-input">
<select name="Finish" class="nice-select">
  <option value="" selected disabled>Finish</option>
  <option value="Finished">Finished</option>
  <option value="Unfinished">Unfinished</option>
  <option value="Semi-Finished">Semi-Finished</option>
</select>
</div>
<div class="space24"></div>
</div>

<div class="col-lg-4">                                        
<div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="space24"></div>
<div class="btn-area1">
<button class="header-btn1 send-to-brokers" type="submit" style="margin-top: 10px;"><img src="{% static 'assets/img/icons/search2.svg' %}" alt=""> Search Your Property</button>
</div>
</div>
<div id="inquiry-list" class="space24"></div>
</div>
</div>
</div>
</div>
</div>

<!--===== PROPERTY AREA ENDS =======-->

<!--===== PROPERTY LISTINGS SECTION =======-->
<div class="property-listings-section sp1">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="section-title text-center mb-4">
          <h2>Available Properties</h2>
          <p>Browse through our collection of properties listed by trusted brokers</p>
        </div>
        
        <!-- Property Type Filter -->
         
      </div>
    </div>
    
    <div class="row" id="property-cards-container">
      <!-- Property cards will be dynamically inserted here -->
    </div>
  </div>
</div>

<!--===== PROPERTY CARD TEMPLATE =======-->
<template id="property-card-template">
  <div class="col-lg-4 col-md-6 mb-4">
    <div class="property-card">
      <div class="property-img">
        <img src="" alt="Property Image" class="img-fluid">
        <div class="property-tag">
          <span class="transaction-type"></span>
        </div>
      </div>
      <div class="property-content">
        <div class="property-info">
          <h3 class="property-title"></h3>
          <p class="property-location"><i class="fa-solid fa-location-dot"></i> <span class="location-text"></span> &nbsp;|&nbsp; <i class="fa-solid fa-tag"></i> <span class="property-type"></span></p>
          <div class="property-details">
            <span><i class="fa-solid fa-bed"></i> <span class="bedrooms"></span> Beds</span>
            <span><i class="fa-solid fa-bath"></i> <span class="bathrooms"></span> Baths</span>
            <span><i class="fa-solid fa-ruler-combined"></i> <span class="area"></span> sqm</span>
          </div>
          <div class="property-meta">
            <div class="price"></div>
            <div class="broker-info">
              <i class="fa-solid fa-user"></i> <span class="broker-name"></span><br>
              <i class="fa-solid fa-phone"></i> <span class="broker-phone"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<!--===== PROPERTY LISTINGS SECTION =======-->

<!--===== CTA AREA STARTS =======-->
<div class="cta1-section-area">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-5">
        <div class="cta-header heading1">
          <h2 >We’re Here To Find Your New Home Project.</h2>
        </div>
      </div>
      <div class="col-lg-3"></div>
      <div class="col-lg-4">
        <div class="cta-btn-area">
          <a href="{% url 'brokers' %}" class="header-btn1">Request a Broker<img src="{% static 'assets/img/icons/arrow1.svg' %}" alt=""></a>
          <a href="{% url 'property-user' %}" class="header-btn1 btn1">Our Property <img src="{% static 'assets/img/icons/arrow1.svg' %}" alt=""></a>
        </div>
      </div>
    </div>
  </div>
</div>
<!--===== CTA AREA ENDS =======-->

<!--===== FOOTER AREA STARTS =======-->
<div class="footer1-section-area">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 col-md-6">
        <div class="footer-logo-area">
          <img src="{% static 'assets/img/logo/logo1.png' %}" alt="">
          <div class="space32"></div>
          <h4>Your dream property comes true</h4>
          <div class="space16"></div>
          <p>At Semsar, we are committed to providing exceptional service and support. Whether you are looking buy or rent in real estate, our team is here help.</p>
          
          <ul>
            <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-linkedin-in"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
          </ul>
        </div>
      </div>

      <div class="col-lg col-md-6">
        <div class="footer-header padding-left1">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="{% url 'home-user' %}">Home</a></li>
            <li><a href="{% url 'about-user' %}">About Us</a></li>
            <li><a href="{% url 'property-user' %}">Properties</a></li>
            <li><a href="{% url 'brokers' %}">Brokers</a></li>
          </ul>
        </div>
      </div>


      <div class="col-lg col-md-6">
        <div class="footer-header">
          <h3>   Info   </h3>
          <ul>
            <li><span><img src="{% static 'assets/img/icons/location1.svg' %}" alt=""></span><a href="">82 Beside Banque Misr, Maadi, Cairo, Egypt</a></li>
            <li><span><img src="{% static 'assets/img/icons/call1.svg' %}" alt=""></span><a href="tel:0123456789">+20123456789</a></li>
            
          </ul>
        </div>
      </div>
    </div>
    <div class="space50 d-lg-block d-none"></div>
    <div class="space30 d-lg-none d-block"></div>
    <div class="row">
      <div class="col-lg-12">
        <div class="copyright">
          <div class="pera">
            <p>ⓒCopyright 2025 Semsar . All rights reserved</p>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>
<!--===== FOOTER AREA ENDS =======-->

<!--===== JS SCRIPT LINK =======-->
<script src="{% static 'assets/js/plugins/jquery-3-6-0.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/fontawesome.js' %}"></script>
<script src="{% static 'assets/js/plugins/aos.js' %}"></script>
<script src="{% static 'assets/js/plugins/counter.js' %}"></script>
<script src="{% static 'assets/js/plugins/sidebar.js' %}"></script>
<script src="{% static 'assets/js/plugins/magnific-popup.js' %}"></script>
<script src="{% static 'assets/js/plugins/mobilemenu.js' %}"></script>
<script src="{% static 'assets/js/plugins/owlcarousel.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/nice-select.js' %}"></script>
<script src="{% static 'assets/js/plugins/waypoints.js' %}"></script>
<script src="{% static 'assets/js/plugins/slick-slider.js' %}"></script>
<script src="{% static 'assets/js/plugins/circle-progress.js' %}"></script>
<script src="{% static 'assets/js/plugins/gsap.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/ScrollTrigger.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/Splitetext.js' %}"></script>
<script src="{% static 'assets/js/main.js' %}"></script>
<script>
  $(function () {
    // Initialize nice-select for all select elements
    $('select.nice-select').niceSelect();
    
    // Store all area options for each dropdown
    const allAreaOptions = {};
    
    // Function to store original options
    function storeOriginalOptions(areaSelector) {
        const $area = $(areaSelector);
        allAreaOptions[areaSelector] = [];
        
        $area.find('option').each(function() {
            const $option = $(this);
            allAreaOptions[areaSelector].push({
                value: $option.val(),
                text: $option.text(),
                city: $option.data('city'),
                disabled: $option.prop('disabled'),
                selected: $option.prop('selected')
            });
        });
    }
    
    // Function to link city and area dropdowns
    function linkCityAreaDropdowns(citySelector, areaSelector) {
        const $city = $(citySelector);
        const $area = $(areaSelector);
        
        // Store original options
        storeOriginalOptions(areaSelector);
        
        function filterAreasByCity() {
            const selectedCity = $city.val();
            
            // Clear current options
            $area.empty();
            
            // Add back filtered options
            allAreaOptions[areaSelector].forEach(function(option) {
                // Add option if it has no city data (default option) or matches selected city
                if (!option.city || option.city === selectedCity) {
                    const $newOption = $('<option>', {
                        value: option.value,
                        text: option.text,
                        disabled: option.disabled && !option.city, // Keep default option disabled
                        selected: false // Reset selection
                    });
                    
                    if (option.city) {
                        $newOption.data('city', option.city);
                    }
                    
                    $area.append($newOption);
                }
            });
            
            // Reset to default selection
            $area.val('');
            
            // Destroy and recreate nice-select
            $area.niceSelect('destroy');
            $area.niceSelect();
        }
        
        // Initial filtering when page loads
        filterAreasByCity();
        
        // Filter when city selection changes
        $city.on('change', filterAreasByCity);
    }
    
    // Call storeOriginalOptions for all relevant area dropdowns ONCE here
    storeOriginalOptions('#area-rent');
    storeOriginalOptions('#area-sale');

    // For RENT tab - link city-rent and area-rent
    linkCityAreaDropdowns('select[name="city-rent"]', '#area-rent');
    
    // For SALE tab - link city-sale and area-sale
    linkCityAreaDropdowns('select[name="city-sale"]', '#area-sale');
});
</script>

<script>
// Function to fetch properties from the backend
async function fetchProperties() {
  try {
    const response = await fetch('/api/properties/');
    if (!response.ok) throw new Error('Failed to fetch properties');
    const data = await response.json();
    return data.properties;
  } catch (error) {
    console.error('Error fetching properties:', error);
    return [];
  }
}

// Function to create property card from template
function createPropertyCard(property) {
  const template = document.getElementById('property-card-template');
  const card = template.content.cloneNode(true);
  
  // Set property image from database
  const img = card.querySelector('.property-img img');
  if (property.images && property.images.length > 0) {
    let src = property.images[0];
    // If already absolute or starts with /media, keep as-is otherwise prefix
    if (!src.startsWith('http') && !src.startsWith('/')) {
      src = `/media/${src}`;
    }
    img.src = src;
  } else {
    img.src = '{% static "assets/img/placeholder-property.jpg" %}';
  }
  img.alt = property.title;
  
  // Set transaction type with appropriate styling
  const transactionType = card.querySelector('.transaction-type');
  transactionType.textContent = property.transaction_type;
  transactionType.classList.add(property.transaction_type.toLowerCase().replace(' ', '-'));
  
  // Set property details
  card.querySelector('.property-title').textContent = property.title;
  card.querySelector('.location-text').textContent = `${property.city}, ${property.area}`;
  card.querySelector('.bedrooms').textContent = property.bedrooms;
  card.querySelector('.bathrooms').textContent = property.bathrooms;
  card.querySelector('.area').textContent = property.size;
  let priceText = property.price + ' EGP';
  if (property.transaction_type && property.transaction_type.toLowerCase().includes('rent')) {
    priceText += '/Month';
  }
  card.querySelector('.price').textContent = priceText;
  card.querySelector('.broker-name').textContent = property.broker_name;
  card.querySelector('.broker-phone').textContent = property.broker_phone;
  card.querySelector('.property-type').textContent = property.property_type;
  
  // Add data attribute for filtering
  const cardElement = card.querySelector('.col-lg-4');
  cardElement.setAttribute('data-type', property.transaction_type);
  
  return card;
}

// Function to render properties with optional filter and search criteria
async function renderProperties(filter = 'all', searchFilters = null) {
  const container = document.getElementById('property-cards-container');
  const properties = await fetchProperties();
  
  container.innerHTML = ''; // Clear existing cards
  
  if (properties.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center">
        <p>No properties available at the moment.</p>
      </div>
    `;
    return;
  }
  
  // Filter by transaction type (rent / sale) if needed
  const normFilter = filter.toString().toLowerCase();
  let filteredProperties = normFilter === 'all' 
    ? properties 
    : properties.filter(p => (p.transaction_type || '').toString().toLowerCase() === normFilter);

  // Apply search filters if provided
  if (searchFilters) {
    filteredProperties = filteredProperties.filter(p => {
      // City & Area
      if (searchFilters.city && (p.city || '').toString().toLowerCase() !== searchFilters.city.toLowerCase()) return false;
      if (searchFilters.area && (p.area || '').toString().toLowerCase() !== searchFilters.area.toLowerCase()) return false;
      // Property Type
      if (searchFilters.property_type && (p.property_type || '').toString().toLowerCase() !== searchFilters.property_type.toLowerCase()) return false;
      // Furnished
      if (typeof searchFilters.furnished !== 'undefined' && searchFilters.furnished !== null) {
        const isFurnished = p.furnished ?? false; // backend should provide boolean
        if (searchFilters.furnished !== isFurnished) return false;
      }
      // Numeric ranges
      const numCheck = (val, min, max) => {
        const numVal = Number(val);
        if (Number.isNaN(numVal)) return false;
        if (min !== null && numVal < min) return false;
        if (max !== null && numVal > max) return false;
        return true;
      };
      if (!numCheck(p.bedrooms, searchFilters.bedroomsMin, searchFilters.bedroomsMax)) return false;
      if (!numCheck(p.bathrooms, searchFilters.bathroomsMin, searchFilters.bathroomsMax)) return false;
      if (!numCheck(p.price, searchFilters.priceMin, searchFilters.priceMax)) return false;
      if (!numCheck(p.size, searchFilters.sizeMin, searchFilters.sizeMax)) return false;
      return true;
    });
  }
  
  if (filteredProperties.length === 0) {
    container.innerHTML = `
      <div class="col-12 text-center">
        <p>No properties match your criteria.</p>
      </div>
    `;
    return;
  }
  
  filteredProperties.forEach(property => {
    container.appendChild(createPropertyCard(property));
  });
}

// Function to fetch properties from the backend
async function fetchProperties() {
  try {
    const response = await fetch('/api/properties/');
    if (!response.ok) throw new Error('Failed to fetch properties');
    const data = await response.json();
    return data.properties;
  } catch (error) {
    console.error('Error fetching properties:', error);
    return [];
  }
}

// Function to create property card from template
function createPropertyCard(property) {
  const template = document.getElementById('property-card-template');
  const card = template.content.cloneNode(true);
  
  // Set property image from database
  const img = card.querySelector('.property-img img');
  if (property.images && property.images.length > 0) {
    let src = property.images[0];
    // If already absolute or starts with /media, keep as-is otherwise prefix
    if (!src.startsWith('http') && !src.startsWith('/')) {
      src = `/media/${src}`;
    }
    img.src = src;
  } else {
    img.src = '{% static "assets/img/placeholder-property.jpg" %}';
  }
  img.alt = property.title;
  
  // Set transaction type with appropriate styling
  const transactionType = card.querySelector('.transaction-type');
  transactionType.textContent = property.transaction_type;
  transactionType.classList.add(property.transaction_type.toLowerCase().replace(' ', '-'));
  
  // Set property details
  card.querySelector('.property-title').textContent = property.title;
  card.querySelector('.location-text').textContent = `${property.city}, ${property.area}`;
  card.querySelector('.bedrooms').textContent = property.bedrooms;
  card.querySelector('.bathrooms').textContent = property.bathrooms;
  card.querySelector('.area').textContent = property.size;
  let priceText2 = property.price + ' EGP';
  if (property.transaction_type && property.transaction_type.toLowerCase().includes('rent')) {
    priceText2 += '/Month';
  }
  card.querySelector('.price').textContent = priceText2;
  card.querySelector('.broker-name').textContent = property.broker_name;
  card.querySelector('.broker-phone').textContent = property.broker_phone;
  card.querySelector('.property-type').textContent = property.property_type;
  
  // Add data attribute for filtering
  const cardElement = card.querySelector('.col-lg-4');
  cardElement.setAttribute('data-type', property.transaction_type);
  
  return card;
}

// Initialize when the page loads
document.addEventListener('DOMContentLoaded', () => {
  renderProperties('all');
  
  // Search button click handler
  const searchBtn = document.getElementById('search-button');
  if (searchBtn) {
    searchBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const activeTab = document.querySelector('.listing-tabs-area .nav-link.active');
      const isRent = activeTab && activeTab.getAttribute('aria-controls') === 'pills-home';
      // Define selectors according to tab
      const prefix = isRent ? '-rent' : '-sale';
      const getValue = (selector) => {
        const el = document.querySelector(selector);
        if (!el) return null;
        return el.value && el.value !== '' ? el.value : null;
      };
      const filters = {
        city: getValue(`select[name="city${prefix}"]`),
        area: getValue(`#area${prefix}`),
        property_type: getValue(`select[name="Type${prefix}"]`),
        bedroomsMin: parseInt(getValue(`input[name="bedrooms${prefix}"]`)) || null,
        bathroomsMin: parseInt(getValue(`input[name="bathrooms${prefix}"]`)) || null,
        priceMin: parseInt(getValue(`input[name="min_price${prefix}"]`)) || null,
        priceMax: parseInt(getValue(`input[name="max_price${prefix}"]`)) || null,
        sizeMin: parseInt(getValue(`input[name="min_size${prefix}"]`)) || null,
        sizeMax: parseInt(getValue(`input[name="max_size${prefix}"]`)) || null,
        furnished: (() => {
          const ch = document.querySelector(`input[name="Furnished"]:checked`);
          if (!ch) return null;
          return ch.value === 'yes';
        })(),
      };
      // Clear undefined values
      Object.keys(filters).forEach(k => {
        if (filters[k] === null || Number.isNaN(filters[k])) delete filters[k];
      });
      // Render using filters; also ensure transaction type matches tab
      const typeFilter = isRent ? 'rent' : 'sale';
      renderProperties(typeFilter, filters);
    });
  }
});
</script>
</body>
</html>
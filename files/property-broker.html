<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Your Properties </title>

     <!--=====FAB ICON=======-->
    <link rel="shortcut icon" href="assets/img/logo/fav-logo1.png" type="image/x-icon">

    <!--===== CSS LINK =======-->
    <link rel="stylesheet" href="assets/css/plugins/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/plugins/aos.css">
    <link rel="stylesheet" href="assets/css/plugins/fontawesome.css">
    <link rel="stylesheet" href="assets/css/plugins/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/plugins/mobile.css">
    <link rel="stylesheet" href="assets/css/plugins/owlcarousel.min.css">
    <link rel="stylesheet" href="assets/css/plugins/sidebar.css">
    <link rel="stylesheet" href="assets/css/plugins/slick-slider.css">
    <link rel="stylesheet" href="assets/css/plugins/nice-select.css">
    <link rel="stylesheet" href="assets/css/main.css">

    <!--=====  JS SCRIPT LINK =======-->
    <script src="assets/js/plugins/jquery-3-6-0.min.js"></script>

    <style>
      .social-links-mobile-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex; 
  gap: 30px; 
}

.social-links-mobile-menu li {
  display: inline-block;
}

.social-links-mobile-menu a {
  text-decoration: none;
  color: inherit;
  font-size: 20px; 
}

    </style>
</head>
<body class="homepage1-body">

<!--===== PRELOADER STARTS =======-->
<div id="preloader">
  <div class="home-icon">
    <div class="roof"></div>
    <div class="walls"></div>
    <div class="door"></div>
      <div class="windows">
          <div class="window"></div>
          <div class="window"></div>
      </div>
  </div>
  <div id="ctn-preloader" class="ctn-preloader">
    <div class="animation-preloader">
        <div class="txt-loading">
             <span data-text-preloader="S" class="letters-loading">
              S
            </span>
            <span data-text-preloader="E" class="letters-loading">
               E
            </span>
            <span data-text-preloader="M" class="letters-loading">
                M
            </span>
            <span data-text-preloader="S" class="letters-loading">
                S
            </span>
            <span data-text-preloader="A" class="letters-loading">
                A
            </span>
            <span data-text-preloader="R" class="letters-loading">
                R
            </span>
        </div>
    </div>
  </div>
</div>
<!--===== PRELOADER ENDS =======-->

  <!--===== PAGE PROGRESS START=======-->
  <div class="paginacontainer">
    <div class="progress-wrap">
      <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
      </svg>
    </div>
  </div>
<!--===== PAGE PROGRESS END=======-->

   <!--=====HEADER START=======-->
   <header>
    <div class="header-area homepage1 inner-menu header header-sticky d-none d-lg-block " id="header">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="header-elements">
              <div class="site-logo">
                <a href=""><img src="assets/img/logo/logo2.png" alt=""></a>
              </div>
              <div class="main-menu">
                <ul>
                  <li><a href="./home-broker.html">Home </a>
                  <li><a href="about-broker.html">About</a></li>
                  <li><a href="property-broker.html">Your Properties</a></li>
                  <li><a href="Customers.html">Customers</a></li>
                </ul>
              </div>
              <div class="btn-area">

              </div>

              <div class="header-search-form-wrapper">
                <div class="tx-search-close tx-close"><i class="fa-solid fa-xmark"></i></div>
                <div class="header-search-container">
                    <form role="search" class="search-form">
                    <input type="search"  class="search-field" placeholder="Search …" value="" name="s">
                    <button type="submit" class="search-submit"><img src="assets/img/icons/search1.svg" alt=""></button>
                    </form>
                </div>
            </div>
            <div class="body-overlay"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!--=====HEADER END =======-->

  <!--===== MOBILE HEADER STARTS =======-->

  <div class="mobile-header mobile-haeder2 d-block d-lg-none">
  <div class="container-fluid">
    <div class="col-12">
      <div class="mobile-header-elements">
        <div class="mobile-logo">
          <a href=""><img src="assets/img/logo/logo2.png" alt=""></a>
        </div>
        <div class="mobile-nav-icon dots-menu">
          <i class="fa-solid fa-bars-staggered"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mobile-sidebar mobile-sidebar2">
  <div class="logosicon-area">
     <div class="site-logo">
        <a href=""><img src="assets/img/logo/logo1.png" alt=""></a>
        </div>
    <div class="menu-close">
      <i class="fa-solid fa-xmark"></i>
    </div>
   </div>
  <div class="mobile-nav mobile-nav1">
    <ul class="mobile-nav-list nav-list1">
      <li><a href="./home-user.html" >Home </a>
       
          </li>
        
      <li><a href="about.html">About</a></li>
      <li><a href="property.html">Property</a></li>
      
    <div class="allmobilesection">
      <div class="single-footer">
        <h3>Contact Info</h3>
        <div class="footer1-contact-info">
          <div class="contact-info-single">
            <div class="contact-info-icon">
              <span><i class="fa-solid fa-phone-volume"></i></span>
            </div>
            <div class="contact-info-text">
              <a href="tel:+3(924)4596512">+0201020017477</a>
            </div>
          </div>
          
          <div class="single-footer" >
            <h3>Our Location</h3>
            <div class="contact-info-single">
              <div class="contact-info-icon">
                <span><i class="fa-solid fa-location-dot"></i></span>
              </div>
              <div class="contact-info-text">
                <a href="mailto:info@example.com" >57th Street, Al-Bashaer District<br> 6th october, Giza </a>
              </div>
            </div>
          </div>
          <div class="single-footer"  >
            <h3>Social Links</h3> 
            <div class="social-links-mobile-menu" >
              <ul>
                <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-linkedin-in"></i></a></li>
                <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
     </div>
  </div>
</div>
 
<!--===== MOBILE HEADER STARTS =======-->

<!--===== HERO AREA STARTS =======-->
<div class="properties3-section-area sp1">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 m-auto">
          <div class="property-header text-center heading6">
            <h5 class="text-anim"><img src="assets/img/icons/logo-icon2.svg" alt="">Properties</h5>
            <h2 class="text-anime-style-3">Manage Your Properties</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
<!--===== HERO AREA ENDS =======-->

<!--===== PROPERTY AREA STARTS =======-->
<div class="property-inner-area sp1">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
          <div class="listing-tabs-area">
            <ul class="nav nav-pills" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">For Rent</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">For Sale</button>
              </li>
            </ul>
            <div class="space24"></div>
            <div class="tab-content" id="pills-tabContent">
              <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
                <div class="row">
                  <div class="row" style="justify-content: center;">
                  <div class="col-lg-4">
                    <div class="listing-input">
                        <select id="broker-city-rent" name="broker-city-rent" class="city-select nice-select">
                            <option value="" selected disabled>Governorate</option>
                            <option value="cairo">Cairo</option>
                            <option value="giza">Giza</option>
                        </select>
                    </div>
                    <div class="space24"></div>
                </div>                  
                  <div class="col-lg-4">
                      <div class="listing-input">
                        <select id="broker-area-rent" name="broker-area-rent" class="area-select nice-select">
                          <option value="" disabled selected>Area</option>

                          <!-- CAIRO -->
                          
                          <option value="shubra"          data-city="cairo">Shubra</option>
                          <option value="elmarg"          data-city="cairo">El Marg</option>
                          <option value="dar-el-salam"    data-city="cairo">Dar El Salam</option>
                          <option value="maadi"           data-city="cairo">Maadi</option>
                          <option value="nasr-city"       data-city="cairo">Nasr City</option>
                          <option value="mokattam"        data-city="cairo">Mokattam</option>
                          <option value="new-cairo"       data-city="cairo">New Cairo</option>
                          <option value="garden-city"     data-city="cairo">Garden City</option>
                          <option value="al-rehab-city"   data-city="cairo">Al Rehab City</option>

                          <!-- ===================== GIZA ===================== -->
                          <option value="imbaba"            data-city="giza">Imbaba</option>
                          <option value="boulaq-eldakrour"  data-city="giza">Boulaq El-Dakrour</option>
                          <option value="elmarg"            data-city="giza">El Marg</option>
                          <option value="mohandessin"       data-city="giza">Mohandessin</option>
                          <option value="dokki"             data-city="giza">Dokki</option>
                          <option value="agouza"            data-city="giza">Agouza</option>
                          <option value="beverly-hills"     data-city="giza">Beverly Hills</option>
                          <option value="dream-land"        data-city="giza">Dream Land</option>
                          <option value="sheikh-zayed"      data-city="giza">Sheikh Zayed</option>
                      </select>
                      </div>
                      <div class="space24"></div>
                  </div>
                  </div>
              
                  <div class="col-lg-4">
                    <div class="listing-input">
                      <select name="broker-Type-rent" class="nice-select">
                          <option value="" selected disabled>Type</option>
                          <option value="Roof">Roof</option>
                          <option value="Apartment">Apartment</option>
                          <option value="Duplex">Duplex</option>
                          <option value="Villa">Villa</option>
                      </select>
                  </div>
                    <div class="space24"></div>
                </div>

            <div class="col-lg-4">
              <div class="listing-input">
                <input  type="number"
                        name="broker-bathrooms-rent"
                        class="nice-select"   
                        placeholder="Bathrooms"
                        min="0"              
                        step="1"           
                        inputmode="numeric">             
              </div>
              <div class="space24"></div>
          </div>
          <div class="col-lg-4">
            <div class="listing-input">
              <input  type="number"
                      name="broker-bedrooms-rent"
                      class="nice-select"   
                      placeholder="Bedrooms"
                      min="0"              
                      step="1"           
                      inputmode="numeric">             
            </div>
            <div class="space24"></div>
        </div>

        <div class="col-lg-4">
         <div class="row">
          <div class="col-lg-12">
            <div class="listing-input">
              <input  type="number"
                      name="broker-price-rent"
                      class="nice-select"   
                      placeholder="Price (EGP)"
                      min="0"              
                      step="1000"           
                      inputmode="numeric">             
            </div>
          <div class="space24"></div>
          </div>
          
          </div>
          </div>
          
          <div class="col-lg-4">
            <div class="col-lg-12">
              <div class="listing-input">
                <input  type="number"
                name="broker-size-rent"
                class="nice-select"   
                placeholder="Size (m²)"
                min="0"              
                step="1"           
                inputmode="numeric">             
              </div>
              <div class="space24"></div>
            </div>
            <div class="col-lg-12">
              <div class="listing-input">
                <input placeholder="Add Media (1-15 photos)" type="file" id="property_media_rent" name="property_media_rent" accept="image/*" multiple data-min-files="1" data-max-files="15">
              </div>
              <div class="space24"></div>
          </div>
         </div>

     <div class="col-lg-4">
      <div class="row">
        <div class="col-lg-12">                 
          <div class="listing-input">
            <select name="broker-Furnished-sale" class="nice-select">
                <option value="" selected disabled>Furnish</option>
                <option value="Furnished">Furnished</option>
                <option value="Not-Furnished">Not Furnished</option>
            </select>
        </div>
        <div class="space24"></div>
    </div>
      </div>
   </div>



<div class="col-lg-4">
<div class="btn-area1">
  <button class="header-btn1 send-to-brokers" name="list-property-rent" type="submit" style="margin-top: 10px;"><img src="{% static 'assets/img/icons/search2.svg' %}" alt=""> List Property</button>
  <div class="space24"></div>
</div>
</div>
</div>
</div>
<div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
<div class="row">
  <div class="row" style="justify-content: center;">
  <div class="col-lg-4">
    <div class="listing-input">
        <select id="broker-city-sale" name="broker-city-sale" class="city-select nice-select">
            <option value="" selected disabled>Governorate</option>
            <option value="cairo">Cairo</option>
            <option value="giza">Giza</option>
        </select>
    </div>
    <div class="space24"></div>
</div>                  
  <div class="col-lg-4">
      <div class="listing-input">
        <select id="broker-area-sale" name="broker-area-sale" class="area-select nice-select">
          <option value="" disabled selected>Area</option>

          <!-- CAIRO -->
          
          <option value="shubra"          data-city="cairo">Shubra</option>
          <option value="elmarg"          data-city="cairo">El Marg</option>
          <option value="dar-el-salam"    data-city="cairo">Dar El Salam</option>
          <option value="maadi"           data-city="cairo">Maadi</option>
          <option value="nasr-city"       data-city="cairo">Nasr City</option>
          <option value="mokattam"        data-city="cairo">Mokattam</option>
          <option value="new-cairo"       data-city="cairo">New Cairo</option>
          <option value="garden-city"     data-city="cairo">Garden City</option>
          <option value="al-rehab-city"   data-city="cairo">Al Rehab City</option>

          <!-- ===================== GIZA ===================== -->
          <option value="imbaba"            data-city="giza">Imbaba</option>
          <option value="boulaq-eldakrour"  data-city="giza">Boulaq El-Dakrour</option>
          <option value="elmarg"            data-city="giza">El Marg</option>
          <option value="mohandessin"       data-city="giza">Mohandessin</option>
          <option value="dokki"             data-city="giza">Dokki</option>
          <option value="agouza"            data-city="giza">Agouza</option>
          <option value="beverly-hills"     data-city="giza">Beverly Hills</option>
          <option value="dream-land"        data-city="giza">Dream Land</option>
          <option value="sheikh-zayed"      data-city="giza">Sheikh Zayed</option>
      </select>
      </div>
      <div class="space24"></div>
  </div>
  </div>

  <div class="col-lg-4">
    <div class="listing-input">
      <select name="broker-Type-sale" class="nice-select">
          <option value="" selected disabled>Type</option>
          <option value="Roof">Roof</option>
          <option value="Apartment">Apartment</option>
          <option value="Duplex">Duplex</option>
          <option value="Villa">Villa</option>
      </select>
  </div>
    <div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="listing-input">
<input  type="number"
        name="broker-bathrooms-sale"
        class="nice-select"   
        placeholder="Bathrooms"
        min="0"              
        step="1"           
        inputmode="numeric">             
</div>
<div class="space24"></div>
</div>
<div class="col-lg-4">
<div class="listing-input">
<input  type="number"
      name="broker-bedrooms-sale"
      class="nice-select"   
      placeholder="Bedrooms"
      min="0"              
      step="1"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>

<div class="col-lg-4">
<div class="row">
<div class="col-lg-12">
<div class="listing-input">
<input  type="number"
      name="broker-price-sale"
      class="nice-select"   
      placeholder="Price (EGP)"
      min="0"              
      step="1000"           
      inputmode="numeric">             
</div>
<div class="space24"></div>
</div>
<div class="col-lg-12">
  <div class="listing-input">
    <select name="broker-Finish-sale" class="nice-select">
      <option value="" selected disabled>Finish</option>
      <option value="Finished">Finished</option>
      <option value="Unfinished">Unfinished</option>
      <option value="Semi-Finished">Semi-Finished</option>
  </select>
  </div>
  <div class="space24"></div>
</div>
</div>
</div>

<div class="col-lg-4">
<div class="col-lg-12">
<div class="listing-input">
<input  type="number"
name="broker-size-sale"
class="nice-select"   
placeholder="Size (m²)"
min="0"              
step="1"           
inputmode="numeric">             
</div>
<div class="space24"></div>
</div>
<div class="col-lg-12">
  <div class="listing-input">
  <input placeholder="Add Media (1-15 photos)" type="file" id="property_media_sale" name="property_media_sale" accept="image/*" multiple data-min-files="1" data-max-files="15">
  </div>
  <div class="space24"></div>
  </div>
</div>

<div class="col-lg-4">
<div class="row">
  <div class="col-lg-12">
    <div class="listing-input">
      <select name="broker-Furnished-sale" class="nice-select">
          <option value="" selected disabled>Furnish</option>
          <option value="Furnished">Furnished</option>
          <option value="Not-Furnished">Not Furnished</option>
      </select>
  </div>
    <div class="space24"></div>
    </div>
</div>
</div>

<div class="col-lg-4">
<div class="btn-area1">
<button class="header-btn1 send-to-brokers" name="list-property-sale" type="submit" style="margin-top: 10px;"><img src="{% static 'assets/img/icons/search2.svg' %}" alt=""> List Property</button>
<div class="space24"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!--===== PROPERTY AREA ENDS =======-->


<!--===== FOOTER AREA STARTS =======-->
<div class="footer1-section-area">
  <div class="container">
    <div class="row">
      <div class="col-lg-4 col-md-6">
        <div class="footer-logo-area">
          <img src="assets/img/logo/logo1.png" alt="">
          <div class="space32"></div>
          <h4>Your dream property comes true</h4>
          <div class="space16"></div>
          <p>At Semsar, we are committed to providing exceptional service and support. Whether you are looking buy or rent in real estate, our team is here help.</p>
          
          <ul>
            <li><a href="#"><i class="fa-brands fa-facebook-f"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-linkedin-in"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-youtube"></i></a></li>
          </ul>
        </div>
      </div>

      <div class="col-lg col-md-6">
        <div class="footer-header padding-left1">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="home-broker.html">Home</a></li>
            <li><a href="about-broker.html">About Us</a></li>
            <li><a href="property-broker.html">Your Properties</a></li>
            <li><a href="Customers.html">Customers</a></li>
          </ul>
        </div>
      </div>


      <div class="col-lg col-md-6">
        <div class="footer-header">
          <h3>   Info   </h3>
          <ul>
            <li><span><img src="assets/img/icons/location1.svg" alt=""></span><a href="">82 Beside Banque Misr, Maadi, Cairo, Egypt</a></li>
            <li><span><img src="assets/img/icons/call1.svg" alt=""></span><a href="tel:0123456789">+20123456789</a></li>
            
          </ul>
        </div>
      </div>
    </div>
    <div class="space50 d-lg-block d-none"></div>
    <div class="space30 d-lg-none d-block"></div>
    <div class="row">
      <div class="col-lg-12">
        <div class="copyright">
          <div class="pera">
            <p>ⓒCopyright 2025 Semsar . All rights reserved</p>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>
<!--===== FOOTER AREA ENDS =======-->

<!--===== JS SCRIPT LINK =======-->
<script src="assets/js/plugins/bootstrap.min.js"></script>
<script src="assets/js/plugins/fontawesome.js"></script>
<script src="assets/js/plugins/aos.js"></script>
<script src="assets/js/plugins/counter.js"></script>
<script src="assets/js/plugins/sidebar.js"></script>
<script src="assets/js/plugins/magnific-popup.js"></script>
<script src="assets/js/plugins/mobilemenu.js"></script>
<script src="assets/js/plugins/owlcarousel.min.js"></script>
<script src="assets/js/plugins/nice-select.js"></script>
<script src="assets/js/plugins/waypoints.js"></script>
<script src="assets/js/plugins/slick-slider.js"></script>
<script src="assets/js/plugins/circle-progress.js"></script>
<script src="assets/js/plugins/gsap.min.js"></script>
<script src="assets/js/plugins/ScrollTrigger.min.js"></script>
<script src="assets/js/plugins/Splitetext.js"></script>
<script src="assets/js/main.js"></script>
<script>
  $(function () {
    // Initialize nice-select for all select elements
    $('select.nice-select').niceSelect();
    
    // Store all area options for each dropdown
    const allAreaOptions = {};
    
    // Function to store original options
    function storeOriginalOptions(areaSelector) {
        const $area = $(areaSelector);
        // Only store if not already stored
        if (!allAreaOptions[areaSelector] || allAreaOptions[areaSelector].length === 0) {
            allAreaOptions[areaSelector] = [];
            $area.find('option').each(function() {
                const $option = $(this);
                allAreaOptions[areaSelector].push({
                    value: $option.val(),
                    text: $option.text(),
                    city: $option.data('city'),
                    disabled: $option.prop('disabled'),
                    selected: $option.prop('selected')
                });
            });
        }
    }

    // Call storeOriginalOptions for all relevant area dropdowns ONCE here
    // Assuming same IDs/names as property-user.html for 'For Rent' tab
    if ($('#broker-area-rent').length) {
        storeOriginalOptions('#broker-area-rent');
    }
    // Example for 'For Sale' tab - uncomment and adjust selector if it exists
    // if ($('#area-sale').length) {
    //     storeOriginalOptions('#area-sale');
    // }
    
    // Function to link city and area dropdowns
    function linkCityAreaDropdowns(citySelector, areaSelector) {
        const $city = $(citySelector);
        const $area = $(areaSelector);
        
        // Check if elements exist to prevent errors
        if (!$city.length || !$area.length || !allAreaOptions[areaSelector]) {
            // console.warn('City or Area selector not found, or original options not stored for:', citySelector, areaSelector);
            return;
        }
        
        function filterAreasByCity() {
            const selectedCity = $city.val();
            $area.empty();
            
            allAreaOptions[areaSelector].forEach(function(option) {
                if (!option.city || option.city === selectedCity) {
                    const $newOption = $('<option>', {
                        value: option.value,
                        text: option.text,
                        disabled: option.disabled && !option.city, 
                        selected: false
                    });
                    
                    if (option.city) {
                        $newOption.data('city', option.city);
                    }
                    $area.append($newOption);
                }
            });
            
            $area.val('');
            $area.niceSelect('destroy');
            $area.niceSelect();
        }
        
        filterAreasByCity(); // Initial filtering
        $city.on('change', filterAreasByCity);
    }
    
    // Setup for RENT tab
    if ($('select[name="broker-city-rent"]').length && $('#broker-area-rent').length) {
        linkCityAreaDropdowns('select[name="broker-city-rent"]', '#broker-area-rent');
    }
    
    // Setup for SALE tab (example, uncomment and adjust if it exists)
    // if ($('select[name="city-sale"]').length && $('#area-sale').length) {
    //     linkCityAreaDropdowns('select[name="city-sale"]', '#area-sale');
    // }
  });

  // Capture search data and send to backend (assuming .send-to-brokers class and /api/properties/ endpoint)
  $(function(){
    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
    }

    $('.send-to-brokers').on('click', function(e){
      e.preventDefault();
      const $panel = $(this).closest('.tab-pane');
      const data = {};
      $panel.find('input, select').each(function(){
        const $el = $(this);
        const name = $el.attr('name');
        if(!name) return;
        if($el.attr('type') === 'checkbox'){
          data[name] = $el.is(':checked');
        } else {
          data[name] = $el.val();
        }
      });
      fetch('/api/properties/', {
        method: 'POST',
        headers:{
          'Content-Type':'application/json',
          'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify(data)
      }).then(r => r.json()).then(function(resp){
        console.log('Property listing saved:', resp);
        if(resp.success) {
          alert('Property listing created successfully!');
          // Optionally reset the form
          $panel.find('input[type="text"], input[type="number"], select').val('');
          $panel.find('input[type="file"]').val('');
          // Refresh nice-select dropdowns
          $panel.find('.nice-select').each(function() {
            $(this).trigger('change');
          });
        } else {
          alert('Error: ' + (resp.error || 'Failed to create property listing'));
        }
      }).catch(function(err){
        console.error('Error saving property listing:', err);
        alert('Error: Failed to create property listing. Please try again.');
      });
    });
  });
</script>
</body>
</html>